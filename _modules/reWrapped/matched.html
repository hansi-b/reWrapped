

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>reWrapped.matched &#8212; reWrapped  documentation</title>
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">reWrapped  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for reWrapped.matched</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># !/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Hans Bering&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;Copyright 2017&quot;</span>
<span class="n">__credits__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Hans Bering&quot;</span><span class="p">]</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;MIT License&quot;</span>
<span class="n">__maintainer__</span> <span class="o">=</span> <span class="s2">&quot;Hans Bering&quot;</span>
<span class="n">__email__</span> <span class="o">=</span> <span class="s2">&quot;hansi.b.github@mgail.moc&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Development&quot;</span>

<span class="kn">from</span> <span class="nn">reWrapped.modders</span> <span class="k">import</span> <span class="n">SingleValueField</span><span class="p">,</span> <span class="n">TupleValueField</span>


<span class="k">class</span> <span class="nc">_Group</span><span class="p">(</span><span class="n">SingleValueField</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">defaultValue</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">_Group</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Group requires non-negative index argument (got </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="n">index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_defVal</span> <span class="o">=</span> <span class="n">defaultValue</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">pattern</span><span class="o">.</span><span class="n">groups</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">,</span> \
            <span class="s2">&quot;Pattern </span><span class="si">{}</span><span class="s2"> has </span><span class="si">{}</span><span class="s2"> group(s) (got group index </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span>
                                                                     <span class="n">pattern</span><span class="o">.</span><span class="n">groups</span><span class="p">,</span>
                                                                     <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_string</span><span class="p">,</span> <span class="n">matchObject</span><span class="p">):</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">matchObject</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defVal</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">_Group</span><span class="p">):</span> <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_index</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defVal</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_defVal</span>

    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defVal</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">_After</span><span class="p">(</span><span class="n">SingleValueField</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">_After</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">matchObject</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">string</span><span class="p">[</span><span class="n">matchObject</span><span class="o">.</span><span class="n">end</span><span class="p">():]</span>


<span class="k">class</span> <span class="nc">_Before</span><span class="p">(</span><span class="n">SingleValueField</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">_Before</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">matchObject</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">string</span><span class="p">[:</span><span class="n">matchObject</span><span class="o">.</span><span class="n">start</span><span class="p">()]</span>


<span class="n">after</span> <span class="o">=</span> <span class="n">_After</span><span class="p">()</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">The part behind the match of a searched string.</span>

<span class="sd">Example:</span>

<span class="sd">    &gt;&gt;&gt; from reWrapped import ReWrap, matched</span>
<span class="sd">    &gt;&gt;&gt; class Word(ReWrap):</span>
<span class="sd">    ...     matchOn = &quot;(\w)+&quot;</span>
<span class="sd">    ...     rest = matched.after</span>
<span class="sd">    ...</span>
<span class="sd">    &gt;&gt;&gt; m = Word.search(&quot;... coconuts! and more!&quot;)</span>
<span class="sd">    &gt;&gt;&gt; m.rest</span>
<span class="sd">    &#39;! and more!&#39;</span>

<span class="sd">&quot;&quot;&quot;</span>  <span class="c1"># pylint: disable=W0105</span>

<span class="n">before</span> <span class="o">=</span> <span class="n">_Before</span><span class="p">()</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">The part in front of the match of a searched string.</span>

<span class="sd">Example:</span>

<span class="sd">    &gt;&gt;&gt; from reWrapped import ReWrap, matched</span>
<span class="sd">    &gt;&gt;&gt; class Word(ReWrap):</span>
<span class="sd">    ...     matchOn = &quot;(\w)+&quot;</span>
<span class="sd">    ...     inFront = matched.before</span>
<span class="sd">    ...</span>
<span class="sd">    &gt;&gt;&gt; m = Word.search(&quot; ... coconut! and more!&quot;)</span>
<span class="sd">    &gt;&gt;&gt; m.inFront</span>
<span class="sd">    &#39; ... &#39;</span>

<span class="sd">&quot;&quot;&quot;</span>  <span class="c1"># pylint: disable=W0105</span>


<div class="viewcode-block" id="g"><a class="viewcode-back" href="../../reWrapped.html#reWrapped.matched.g">[docs]</a><span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The basic match group as a field on a ReWrap class. In match instances</span>
<span class="sd">    of that class, the field is the content of the respective single capturing</span>
<span class="sd">    `match group &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_ content.</span>
<span class="sd">    For multiple groups, use :func:`gTuple` or :func:`group`.</span>

<span class="sd">    For the whole match, you can use the abbreviation :data:`g0`. Likewise, the first</span>
<span class="sd">    nine groups have the abbrevations :data:`g1` to :data:`g9`.</span>

<span class="sd">    :param idx: the non-negative index of the desired match group, where zero is the whole match</span>
<span class="sd">    :return:</span>
<span class="sd">        a match field for the group of the argument index</span>
<span class="sd">    :see: https://docs.python.org/3/library/re.html#re.match.group</span>

<span class="sd">    Example::</span>

<span class="sd">        &gt;&gt;&gt; from reWrapped import ReWrap, matched</span>
<span class="sd">        &gt;&gt;&gt; class TwoWords(ReWrap):</span>
<span class="sd">        ...     matchOn = &quot;(\w+)\s+(\w+)&quot;</span>
<span class="sd">        ...     firstWord = matched.g(1)</span>
<span class="sd">        ...     secondWord = matched.g(2)</span>
<span class="sd">        ...     allOfIt = matched.g(0)</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; w = TwoWords.search(&quot;hello world&quot;)</span>
<span class="sd">        &gt;&gt;&gt; w.firstWord</span>
<span class="sd">        &#39;hello&#39;</span>
<span class="sd">        &gt;&gt;&gt; w.secondWord</span>
<span class="sd">        &#39;world&#39;</span>
<span class="sd">        &gt;&gt;&gt; w.allOfIt</span>
<span class="sd">        &#39;hello world&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_Group</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span></div>


<div class="viewcode-block" id="gOr"><a class="viewcode-back" href="../../reWrapped.html#reWrapped.matched.gOr">[docs]</a><span class="k">def</span> <span class="nf">gOr</span><span class="p">(</span><span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A match group like :func:`g`, but with a default value in case the group is not matched. Only</span>
<span class="sd">    makes sense for optional matches.</span>

<span class="sd">    :param idx: the non-negative index of the desired match group</span>
<span class="sd">    :param defaultValue: the value to return in case the group is not matched</span>
<span class="sd">    :return: a matcher for the group of the argument index</span>

<span class="sd">    Example:</span>

<span class="sd">        &gt;&gt;&gt; from reWrapped import ReWrap, matched</span>
<span class="sd">        &gt;&gt;&gt; class OptionalYear(ReWrap):</span>
<span class="sd">        ...     matchOn = &quot;([0-9]{2})\.([0-9]{2})\.([0-9]{4})?&quot;</span>
<span class="sd">        ...     day = matched.g1.asInt</span>
<span class="sd">        ...     month = matched.g2.asInt</span>
<span class="sd">        ...     year = matched.gOr(3, 2018).asInt</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; m = OptionalYear.search(&quot;02.03.&quot;)</span>
<span class="sd">        &gt;&gt;&gt; m.day, m.month, m.year</span>
<span class="sd">        (2, 3, 2018)</span>
<span class="sd">        &gt;&gt;&gt; m = OptionalYear.search(&quot;02.03.1999&quot;)</span>
<span class="sd">        &gt;&gt;&gt; m.day, m.month, m.year</span>
<span class="sd">        (2, 3, 1999)</span>

<span class="sd">    Note that the default only applies to unmatched groups (i.e., which have a value of `None`),</span>
<span class="sd">    not to zero-length groups, which are matched to the empty string. In the following example,</span>
<span class="sd">    the default value will apply on a missing `numbers` group:</span>

<span class="sd">        &gt;&gt;&gt; from reWrapped import ReWrap, matched</span>
<span class="sd">        &gt;&gt;&gt; class OptNumbers(ReWrap):</span>
<span class="sd">        ...     matchOn = &quot;([0-9])? ([a-z]+)&quot;</span>
<span class="sd">        ...     numbers = matched.gOr(1, -1)</span>
<span class="sd">        ...     letters = matched.g2</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; m = OptNumbers.search(&quot; abc&quot;)</span>
<span class="sd">        &gt;&gt;&gt; m.numbers, m.letters</span>
<span class="sd">        (-1, &#39;abc&#39;)</span>

<span class="sd">    But if the number group can have a zero length, Python matches it as such, and consequently</span>
<span class="sd">    you get the empty string, not the default value:</span>

<span class="sd">        &gt;&gt;&gt; from reWrapped import ReWrap, matched</span>
<span class="sd">        &gt;&gt;&gt; class SomeNumbers(ReWrap):</span>
<span class="sd">        ...     matchOn = &quot;([0-9]*) ([a-z]+)&quot;</span>
<span class="sd">        ...     numbers = matched.gOr(1, -1)</span>
<span class="sd">        ...     letters = matched.g2</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; m = SomeNumbers.search(&quot; xyz&quot;)</span>
<span class="sd">        &gt;&gt;&gt; m.numbers, m.letters</span>
<span class="sd">        (&#39;&#39;, &#39;xyz&#39;)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_Group</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">)</span></div>


<span class="n">g0</span> <span class="o">=</span> <span class="n">_Group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">An abbreviation for :func:`g(0) &lt;g&gt;` - the whole match,</span>
<span class="sd">like `matchobject.group() or matchobject.group(0) &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_:</span>

<span class="sd">    &gt;&gt;&gt; from reWrapped import ReWrap, matched</span>
<span class="sd">    &gt;&gt;&gt; class Word(ReWrap):</span>
<span class="sd">    ...     matchOn = &quot;(\w)+&quot;</span>
<span class="sd">    ...     txt = matched.g0</span>
<span class="sd">    ...</span>
<span class="sd">    &gt;&gt;&gt; m = Word.search(&quot;... coconut! &quot;)</span>
<span class="sd">    &gt;&gt;&gt; m.txt</span>
<span class="sd">    &#39;coconut&#39;</span>

<span class="sd">&quot;&quot;&quot;</span>  <span class="c1"># pylint: disable=W0105</span>

<span class="n">g1</span> <span class="o">=</span> <span class="n">_Group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">An abbreviation for :func:`g(1) &lt;g&gt;` - the content of the first capturing group,</span>
<span class="sd">like `matchobject.group(1) &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_</span>
<span class="sd">&quot;&quot;&quot;</span>  <span class="c1"># pylint: disable=W0105</span>

<span class="n">g2</span> <span class="o">=</span> <span class="n">_Group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">An abbreviation for :func:`g(2) &lt;g&gt;` - the content of the second capturing group,</span>
<span class="sd">like `matchobject.group(2) &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_</span>
<span class="sd">&quot;&quot;&quot;</span>  <span class="c1"># pylint: disable=W0105</span>
<span class="n">g3</span> <span class="o">=</span> <span class="n">_Group</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">An abbreviation for :func:`g(3) &lt;g&gt;` - the content of the third capturing group,</span>
<span class="sd">like `matchobject.group(3) &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_</span>
<span class="sd">&quot;&quot;&quot;</span>  <span class="c1"># pylint: disable=W0105</span>
<span class="n">g4</span> <span class="o">=</span> <span class="n">_Group</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">An abbreviation for :func:`g(4) &lt;g&gt;` - the content of the fourth capturing group,</span>
<span class="sd">like `matchobject.group(4) &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_</span>
<span class="sd">&quot;&quot;&quot;</span>  <span class="c1"># pylint: disable=W0105</span>
<span class="n">g5</span> <span class="o">=</span> <span class="n">_Group</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">An abbreviation for :func:`g(5) &lt;g&gt;` - the content of the fifth capturing group,</span>
<span class="sd">like `matchobject.group(5) &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_</span>
<span class="sd">&quot;&quot;&quot;</span>  <span class="c1"># pylint: disable=W0105</span>
<span class="n">g6</span> <span class="o">=</span> <span class="n">_Group</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">An abbreviation for :func:`g(6) &lt;g&gt;` - the content of the sixth capturing group,</span>
<span class="sd">like `matchobject.group(6) &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_</span>
<span class="sd">&quot;&quot;&quot;</span>  <span class="c1"># pylint: disable=W0105</span>
<span class="n">g7</span> <span class="o">=</span> <span class="n">_Group</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">An abbreviation for :func:`g(7) &lt;g&gt;` - the content of the seventh capturing group,</span>
<span class="sd">like `matchobject.group(7) &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_</span>
<span class="sd">&quot;&quot;&quot;</span>  <span class="c1"># pylint: disable=W0105</span>
<span class="n">g8</span> <span class="o">=</span> <span class="n">_Group</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">An abbreviation for :func:`g(8) &lt;g&gt;` - the content of the eigth capturing group,</span>
<span class="sd">like `matchobject.group(8) &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_</span>
<span class="sd">&quot;&quot;&quot;</span>  <span class="c1"># pylint: disable=W0105</span>
<span class="n">g9</span> <span class="o">=</span> <span class="n">_Group</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">An abbreviation for :func:`g(9) &lt;g&gt;` - the content of the ninth capturing group,</span>
<span class="sd">like `matchobject.group(9) &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_</span>
<span class="sd">&quot;&quot;&quot;</span>  <span class="c1"># pylint: disable=W0105</span>


<span class="k">class</span> <span class="nc">_GroupTuple</span><span class="p">(</span><span class="n">TupleValueField</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">indices</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">_GroupTuple</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">min</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> \
            <span class="s2">&quot;GroupTuple requires non-negative index arguments (got </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">pattern</span><span class="o">.</span><span class="n">groups</span> <span class="o">&gt;=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">),</span> \
                <span class="s2">&quot;Pattern </span><span class="si">{}</span><span class="s2"> has </span><span class="si">{}</span><span class="s2"> group(s) (got group indices </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span>
                                                                           <span class="n">pattern</span><span class="o">.</span><span class="n">groups</span><span class="p">,</span>
                                                                           <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">pattern</span><span class="o">.</span><span class="n">groups</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> \
                <span class="s2">&quot;Pattern </span><span class="si">{}</span><span class="s2"> has </span><span class="si">{}</span><span class="s2"> group(s) (got empty group indices)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span>
                                                                              <span class="n">pattern</span><span class="o">.</span><span class="n">groups</span><span class="p">,</span>
                                                                              <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_string</span><span class="p">,</span> <span class="n">matchObject</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="n">matchObject</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">matchObject</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span>


<div class="viewcode-block" id="gTuple"><a class="viewcode-back" href="../../reWrapped.html#reWrapped.matched.gTuple">[docs]</a><span class="k">def</span> <span class="nf">gTuple</span><span class="p">(</span><span class="o">*</span><span class="n">indices</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Multiple match groups with the argument indices.</span>

<span class="sd">    :param indices: the non-negative indices of the desired match groups; optional - if none</span>
<span class="sd">        are given, all groups of the match.</span>
<span class="sd">    :return: a matcher for the groups of the argument indices</span>

<span class="sd">    Example:</span>

<span class="sd">        &gt;&gt;&gt; from reWrapped import ReWrap, matched</span>
<span class="sd">        &gt;&gt;&gt; class FullName(ReWrap):</span>
<span class="sd">        ...     matchOn = &quot;(\w+)\s+(\w+)&quot;</span>
<span class="sd">        ...     lastFirst = matched.gTuple(2, 1)</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; m = FullName.search(&quot;Isaac Newton, physicist&quot;)</span>
<span class="sd">        &gt;&gt;&gt; m.lastFirst</span>
<span class="sd">        (&#39;Newton&#39;, &#39;Isaac&#39;)</span>
<span class="sd">    </span>
<span class="sd">    Note the difference to :func:`group` when called without arguments: :func:`gTuple` returns all groups in this case,</span>
<span class="sd">    whereas :func:`group` does the same as `Python&#39;s match group method &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_</span>
<span class="sd">    and returns the match (i.e., as if called as :func:`group(0) &lt;group&gt;`):</span>
<span class="sd">    </span>
<span class="sd">        &gt;&gt;&gt; from reWrapped import ReWrap, matched</span>
<span class="sd">        &gt;&gt;&gt; class Address(ReWrap):</span>
<span class="sd">        ...     matchOn = &quot;([0-9]+)\s+(\w+)\s*(\w*)&quot;</span>
<span class="sd">        ...     street = matched.gTuple()</span>
<span class="sd">        ...     line = matched.group()</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; m = Address.search(&quot;123 newton avenue&quot;)</span>
<span class="sd">        &gt;&gt;&gt; m.street</span>
<span class="sd">        (&#39;123&#39;, &#39;newton&#39;, &#39;avenue&#39;)</span>
<span class="sd">        &gt;&gt;&gt; m.line</span>
<span class="sd">        &#39;123 newton avenue&#39;</span>
<span class="sd">        &gt;&gt;&gt; m = Address.search(&quot;123 pappelallee&quot;)</span>
<span class="sd">        &gt;&gt;&gt; m.street</span>
<span class="sd">        (&#39;123&#39;, &#39;pappelallee&#39;, &#39;&#39;)</span>
<span class="sd">        &gt;&gt;&gt; m.line</span>
<span class="sd">        &#39;123 pappelallee&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_GroupTuple</span><span class="p">(</span><span class="o">*</span><span class="n">indices</span><span class="p">)</span></div>


<div class="viewcode-block" id="group"><a class="viewcode-back" href="../../reWrapped.html#reWrapped.matched.group">[docs]</a><span class="k">def</span> <span class="nf">group</span><span class="p">(</span><span class="o">*</span><span class="n">indices</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    One or more match groups with the argument index or indices. Mirrors</span>
<span class="sd">    `Python&#39;s match group method &lt;https://docs.python.org/3/library/re.html#re.match.group&gt;`_</span>

<span class="sd">    Note that, in difference to the Python ``group`` method, this does not support named groups (yet).</span>

<span class="sd">    :param indices: the non-negative indices of the desired match groups; optional - if none</span>
<span class="sd">        are given, the whole match, as if called with zero</span>
<span class="sd">    :return: a matcher for the group or groups of the argument index or indices</span>

<span class="sd">    Example:</span>

<span class="sd">        &gt;&gt;&gt; from reWrapped import ReWrap, matched</span>
<span class="sd">        &gt;&gt;&gt; class FullName(ReWrap):</span>
<span class="sd">        ...     matchOn = &quot;(\w+)\s+(\w+)&quot;</span>
<span class="sd">        ...     first = matched.group(1)</span>
<span class="sd">        ...     last = matched.group(2)</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; m = FullName.search(&quot;Isaac Newton, physicist&quot;)</span>
<span class="sd">        &gt;&gt;&gt; m.first, m.last</span>
<span class="sd">        (&#39;Isaac&#39;, &#39;Newton&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">g0</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">g</span><span class="p">(</span><span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">gTuple</span><span class="p">(</span><span class="o">*</span><span class="n">indices</span><span class="p">)</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">reWrapped  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Hans Bering.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.
    </div>
  </body>
</html>